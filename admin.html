<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - DemoTemplate</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ°Ô∏è</text></svg>">
  <style>
    /* Admin Page Layout */
    .admin-layout {
      display: flex;
      min-height: 100vh;
      background: var(--bg-dark);
    }
    
    /* Sidebar */
    .admin-sidebar {
      width: 260px;
      background: linear-gradient(180deg, #0f0f1a 0%, #1a1a2e 100%);
      border-right: 1px solid rgba(255,255,255,0.1);
      padding: 20px 0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
    }
    
    .admin-sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    
    .admin-sidebar-header h1 {
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
    }
    
    .admin-sidebar-header p {
      font-size: 0.75rem;
      color: rgba(255,255,255,0.5);
      margin: 5px 0 0;
    }
    
    .admin-nav {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .admin-nav-item {
      margin: 2px 10px;
    }
    
    .admin-nav-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      color: rgba(255,255,255,0.7);
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.2s;
      font-size: 0.9rem;
    }
    
    .admin-nav-link:hover {
      background: rgba(255,255,255,0.05);
      color: #fff;
    }
    
    .admin-nav-link.active {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: #fff;
    }
    
    .admin-nav-link .nav-icon {
      font-size: 1.1rem;
      width: 24px;
      text-align: center;
    }
    
    .admin-nav-divider {
      height: 1px;
      background: rgba(255,255,255,0.1);
      margin: 15px 20px;
    }
    
    .admin-sidebar-footer {
      padding: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      margin-top: auto;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: inherit;
    }
    
    .admin-sidebar-footer a {
      display: flex;
      align-items: center;
      gap: 10px;
      color: rgba(255,255,255,0.6);
      text-decoration: none;
      font-size: 0.85rem;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.2s;
    }
    
    .admin-sidebar-footer a:hover {
      background: rgba(255,255,255,0.05);
      color: #fff;
    }
    
    /* Main Content */
    .admin-main {
      flex: 1;
      margin-left: 260px;
      padding: 30px;
      max-width: 1200px;
    }
    
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .admin-header h2 {
      font-size: 1.75rem;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .admin-header p {
      color: rgba(255,255,255,0.6);
      margin: 5px 0 0;
    }
    
    /* Content Sections */
    .admin-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    .admin-section.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Cards Grid */
    .admin-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .admin-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 20px;
      transition: all 0.2s;
    }
    
    .admin-card:hover {
      border-color: rgba(255,255,255,0.2);
      transform: translateY(-2px);
    }
    
    .admin-card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .admin-card-icon {
      font-size: 1.5rem;
    }
    
    .admin-card-title {
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    .admin-card-badge {
      font-size: 0.65rem;
      padding: 3px 8px;
      border-radius: 20px;
      text-transform: uppercase;
      font-weight: 600;
    }
    
    .badge-default {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }
    
    .badge-cloud {
      background: rgba(99, 102, 241, 0.2);
      color: #818cf8;
    }
    
    .badge-selected {
      background: var(--primary-color);
      color: #fff;
    }
    
    .admin-card-desc {
      color: rgba(255,255,255,0.6);
      font-size: 0.85rem;
      margin-bottom: 15px;
      line-height: 1.5;
    }
    
    .admin-card-features {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 15px;
    }
    
    .admin-card-feature {
      font-size: 0.7rem;
      padding: 4px 10px;
      background: rgba(255,255,255,0.05);
      border-radius: 20px;
      color: rgba(255,255,255,0.7);
    }
    
    .admin-card-feature.negative {
      color: rgba(255,255,255,0.4);
    }
    
    .admin-card-actions {
      margin-top: 15px;
    }
    
    .admin-card-actions .btn-primary,
    .admin-card-actions .btn-secondary {
      width: 100%;
    }
    
    .admin-card.selected {
      border-color: var(--primary-color);
      background: rgba(var(--primary-rgb), 0.1);
    }
    
    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    
    .stat-card .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-color);
    }
    
    .stat-card .stat-label {
      color: rgba(255,255,255,0.6);
      font-size: 0.85rem;
      margin-top: 5px;
    }
    
    /* Settings Form */
    .settings-form {
      max-width: 600px;
    }
    
    .settings-section {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .settings-section h3 {
      font-size: 1rem;
      margin: 0 0 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .setting-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .setting-row:last-child {
      border-bottom: none;
    }
    
    .setting-info label {
      font-weight: 500;
      display: block;
    }
    
    .setting-info .setting-desc {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.5);
      margin-top: 3px;
    }
    
    /* SQL Query Section */
    .sql-section {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .sql-section h3 {
      font-size: 1rem;
      margin: 0 0 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .sql-status {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .sql-status-icon {
      font-size: 1.25rem;
    }
    
    .sql-status-text {
      flex: 1;
    }
    
    .sql-status-badge {
      padding: 4px 12px;
      background: rgba(99,102,241,0.2);
      border-radius: 20px;
      font-size: 0.75rem;
      color: #818cf8;
    }
    
    .sql-quick-queries {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .sql-quick-queries button {
      font-size: 0.8rem;
      padding: 6px 12px;
    }
    
    .sql-query-input {
      width: 100%;
      height: 120px;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 12px;
      font-family: 'Space Mono', monospace;
      font-size: 0.85rem;
      color: #fff;
      resize: vertical;
    }
    
    .sql-query-input:focus {
      outline: none;
      border-color: var(--primary-color);
    }
    
    .sql-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      align-items: center;
    }
    
    .sql-query-time {
      margin-left: auto;
      color: rgba(255,255,255,0.5);
      font-size: 0.8rem;
    }
    
    .sql-results {
      margin-top: 20px;
    }
    
    .sql-results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .sql-results-container {
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
      padding: 15px;
      max-height: 400px;
      overflow: auto;
    }
    
    .sql-results-container table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    
    .sql-results-container th {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 2px solid rgba(255,255,255,0.2);
      color: var(--primary-color);
      white-space: nowrap;
      font-weight: 600;
    }
    
    .sql-results-container td {
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      white-space: nowrap;
    }
    
    .sql-results-container tr:nth-child(even) {
      background: rgba(255,255,255,0.02);
    }
    
    /* Users Table */
    .users-table {
      margin-top: 20px;
    }
    
    .user-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      margin-bottom: 10px;
    }
    
    .user-row-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .user-row-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    }
    
    .user-row-name {
      font-weight: 500;
    }
    
    .user-row-meta {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.5);
    }
    
    .user-row-actions {
      display: flex;
      gap: 8px;
    }
    
    .user-action-btn {
      padding: 6px 12px;
      font-size: 0.8rem;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .user-action-btn:hover {
      background: rgba(255,255,255,0.1);
    }
    
    .user-action-btn.danger:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: #ef4444;
    }
    
    /* Changelog */
    .changelog-list {
      margin-top: 20px;
    }
    
    .changelog-version {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
    }
    
    .changelog-version h3 {
      font-size: 1.1rem;
      margin: 0 0 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .changelog-date {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.5);
      font-weight: normal;
    }
    
    .changelog-version ul {
      margin: 0;
      padding-left: 20px;
      color: rgba(255,255,255,0.8);
    }
    
    .changelog-version li {
      margin: 8px 0;
      line-height: 1.5;
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
      .admin-sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      
      .admin-sidebar.open {
        transform: translateX(0);
      }
      
      .admin-main {
        margin-left: 0;
        padding: 20px;
      }
      
      .mobile-menu-btn {
        display: flex !important;
      }
      
      .admin-cards {
        grid-template-columns: 1fr;
      }
    }
    
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 200;
      background: var(--primary-color);
      border: none;
      border-radius: 8px;
      padding: 10px 15px;
      font-size: 1.25rem;
      cursor: pointer;
    }
    
    /* Toggle Switch */
    .toggle {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 28px;
    }
    
    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255,255,255,0.1);
      transition: 0.3s;
      border-radius: 28px;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }
    
    .toggle input:checked + .toggle-slider {
      background-color: var(--primary-color);
    }
    
    .toggle input:checked + .toggle-slider:before {
      transform: translateX(22px);
    }
    
    /* Active Data Source Badge */
    .active-source {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px 20px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: 10px;
      margin-bottom: 20px;
    }
    
    .active-source-icon {
      font-size: 1.5rem;
    }
    
    .active-source-text {
      font-weight: 500;
    }
    
    .active-source-label {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.6);
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
  
  <div class="admin-layout">
    <!-- Sidebar -->
    <aside class="admin-sidebar" id="admin-sidebar">
      <div class="admin-sidebar-header">
        <h1>üõ°Ô∏è Admin Panel</h1>
        <p>DemoTemplate v1.2.0</p>
      </div>
      
      <ul class="admin-nav">
        <li class="admin-nav-item">
          <a href="#system-settings" class="admin-nav-link active" data-section="system-settings">
            <span class="nav-icon">‚öôÔ∏è</span>
            System Settings
          </a>
        </li>
        <li class="admin-nav-item">
          <a href="#data-sources" class="admin-nav-link" data-section="data-sources">
            <span class="nav-icon">üìÅ</span>
            Data Sources
          </a>
        </li>
        <li class="admin-nav-item">
          <a href="#sql-database" class="admin-nav-link" data-section="sql-database">
            <span class="nav-icon">üóÉÔ∏è</span>
            SQL Database
          </a>
        </li>
        
        <div class="admin-nav-divider"></div>
        
        <li class="admin-nav-item">
          <a href="#users" class="admin-nav-link" data-section="users">
            <span class="nav-icon">üë•</span>
            Users
          </a>
        </li>
        <li class="admin-nav-item">
          <a href="#statistics" class="admin-nav-link" data-section="statistics">
            <span class="nav-icon">üìä</span>
            Statistics
          </a>
        </li>
        
        <div class="admin-nav-divider"></div>
        
        <li class="admin-nav-item">
          <a href="#changelog" class="admin-nav-link" data-section="changelog">
            <span class="nav-icon">üìù</span>
            Changelog
          </a>
        </li>
      </ul>
      
      <div class="admin-sidebar-footer">
        <a href="index.html">
          <span>‚Üê</span> Back to App
        </a>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="admin-main">
      
      <!-- System Settings Section -->
      <section id="system-settings" class="admin-section active">
        <div class="admin-header">
          <div>
            <h2>‚öôÔ∏è System Settings</h2>
            <p>Configure application behavior and limits</p>
          </div>
        </div>
        
        <div class="settings-form">
          <div class="settings-section">
            <h3>Registration Settings</h3>
            <div class="setting-row">
              <div class="setting-info">
                <label>Require Email Verification</label>
                <span class="setting-desc">Users must verify email before logging in</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-email-verification">
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-row">
              <div class="setting-info">
                <label>Allow Public Signup</label>
                <span class="setting-desc">Anyone can create an account</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-public-signup" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          
          <div class="settings-section">
            <h3>Limits</h3>
            <div class="setting-row">
              <div class="setting-info">
                <label>Max Items per User</label>
                <span class="setting-desc">Maximum items each user can create</span>
              </div>
              <input type="number" id="setting-max-items" value="100" min="1" max="10000" style="width: 100px; padding: 8px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #fff;">
            </div>
          </div>
          
          <div class="settings-section">
            <h3>Maintenance</h3>
            <div class="setting-row">
              <div class="setting-info">
                <label>Maintenance Mode</label>
                <span class="setting-desc">Only admins can access the app</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-maintenance">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          
          <button class="btn-primary" onclick="saveSystemSettings()">üíæ Save Settings</button>
        </div>
      </section>
      
      <!-- Data Sources Section -->
      <section id="data-sources" class="admin-section">
        <div class="admin-header">
          <div>
            <h2>üìÅ Data Sources</h2>
            <p>Choose where to store your application data</p>
          </div>
        </div>
        
        <div class="active-source">
          <span class="active-source-icon">üíæ</span>
          <div>
            <div class="active-source-text">Active: <span id="active-source-name">Browser Storage</span></div>
            <div class="active-source-label">Currently storing data locally</div>
          </div>
        </div>
        
        <div class="admin-cards">
          <!-- localStorage -->
          <div class="admin-card selected" id="card-localstorage">
            <div class="admin-card-header">
              <span class="admin-card-icon">üíæ</span>
              <span class="admin-card-title">localStorage</span>
              <span class="admin-card-badge badge-default">DEFAULT</span>
            </div>
            <p class="admin-card-desc">Browser-based storage. Data persists locally, no sync across devices.</p>
            <div class="admin-card-features">
              <span class="admin-card-feature">‚úì No setup required</span>
              <span class="admin-card-feature">‚úì Works offline</span>
              <span class="admin-card-feature negative">‚úó No sync</span>
            </div>
            <div class="admin-card-actions">
              <button class="btn-primary" disabled>Selected ‚úì</button>
            </div>
          </div>
          
          <!-- Google Sheets -->
          <div class="admin-card" id="card-gsheets">
            <div class="admin-card-header">
              <span class="admin-card-icon">üìä</span>
              <span class="admin-card-title">Google Sheets</span>
              <span class="admin-card-badge badge-cloud">CLOUD</span>
            </div>
            <p class="admin-card-desc">Use Google Forms for writes and Apps Script API for reads.</p>
            <div class="admin-card-features">
              <span class="admin-card-feature">‚úì Free tier</span>
              <span class="admin-card-feature">‚úì Cloud sync</span>
              <span class="admin-card-feature">‚úì Spreadsheet backup</span>
            </div>
            <div class="admin-card-actions">
              <button class="btn-secondary" onclick="configureDataSource('gsheets')">Configure</button>
            </div>
          </div>
          
          <!-- GitHub Gist -->
          <div class="admin-card" id="card-gist">
            <div class="admin-card-header">
              <span class="admin-card-icon">üìù</span>
              <span class="admin-card-title">GitHub Gist</span>
              <span class="admin-card-badge badge-cloud">CLOUD</span>
            </div>
            <p class="admin-card-desc">Store data in a GitHub Gist. Public or secret, with version history.</p>
            <div class="admin-card-features">
              <span class="admin-card-feature">‚úì Version control</span>
              <span class="admin-card-feature">‚úì Public or private</span>
              <span class="admin-card-feature">‚úì Free unlimited</span>
            </div>
            <div class="admin-card-actions">
              <button class="btn-secondary" onclick="configureDataSource('gist')">Configure</button>
            </div>
          </div>
          
          <!-- GitHub Repo -->
          <div class="admin-card" id="card-repo">
            <div class="admin-card-header">
              <span class="admin-card-icon">üêô</span>
              <span class="admin-card-title">GitHub Repo</span>
              <span class="admin-card-badge badge-cloud">CLOUD</span>
            </div>
            <p class="admin-card-desc">Store JSON data in a GitHub repository file.</p>
            <div class="admin-card-features">
              <span class="admin-card-feature">‚úì Version control</span>
              <span class="admin-card-feature">‚úì CI/CD friendly</span>
              <span class="admin-card-feature negative">‚úó Requires token</span>
            </div>
            <div class="admin-card-actions">
              <button class="btn-secondary" onclick="configureDataSource('repo')">Configure</button>
            </div>
          </div>
          
          <!-- JSONbin.io -->
          <div class="admin-card" id="card-jsonbin">
            <div class="admin-card-header">
              <span class="admin-card-icon">üì¶</span>
              <span class="admin-card-title">JSONbin.io</span>
              <span class="admin-card-badge badge-cloud">CLOUD</span>
            </div>
            <p class="admin-card-desc">Free JSON storage API. 10K requests/month on free tier.</p>
            <div class="admin-card-features">
              <span class="admin-card-feature">‚úì Simple REST API</span>
              <span class="admin-card-feature">‚úì Free tier</span>
              <span class="admin-card-feature negative">‚úó Rate limited</span>
            </div>
            <div class="admin-card-actions">
              <button class="btn-secondary" onclick="configureDataSource('jsonbin')">Configure</button>
            </div>
          </div>
          
          <!-- npoint.io -->
          <div class="admin-card" id="card-npoint">
            <div class="admin-card-header">
              <span class="admin-card-icon">üìç</span>
              <span class="admin-card-title">npoint.io</span>
              <span class="admin-card-badge badge-cloud">CLOUD</span>
            </div>
            <p class="admin-card-desc">Free JSON endpoints. No authentication required.</p>
            <div class="admin-card-features">
              <span class="admin-card-feature">‚úì No auth needed</span>
              <span class="admin-card-feature">‚úì Free forever</span>
              <span class="admin-card-feature negative">‚úó Public only</span>
            </div>
            <div class="admin-card-actions">
              <button class="btn-secondary" onclick="configureDataSource('npoint')">Configure</button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- SQL Database Section -->
      <section id="sql-database" class="admin-section">
        <div class="admin-header">
          <div>
            <h2>üóÉÔ∏è SQL Database</h2>
            <p>Query and manage the shared AIUNITES database</p>
          </div>
        </div>
        
        <div class="sql-section">
          <div class="sql-status">
            <span class="sql-status-icon" id="sql-status-icon">‚ö™</span>
            <span class="sql-status-text" id="sql-status-text">Initializing...</span>
            <span class="sql-status-badge">üêô GitHub Sync</span>
          </div>
          
          <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
            <button class="btn-secondary" onclick="SQLDatabase.loadFromGitHub()">‚òÅÔ∏è Load from GitHub</button>
            <button class="btn-secondary" onclick="SQLDatabase.saveToGitHub()">üêô Save to GitHub</button>
            <button class="btn-secondary" onclick="SQLDatabase.createNewDatabase()">‚ûï New Database</button>
          </div>
        </div>
        
        <div class="sql-section">
          <h3>üîç Quick Queries</h3>
          <div class="sql-quick-queries">
            <button class="btn-secondary" onclick="SQLDatabase.quickQuery('users')">üë• Show Users</button>
            <button class="btn-secondary" onclick="SQLDatabase.quickQuery('tables')">üìã List Tables</button>
            <button class="btn-secondary" onclick="SQLDatabase.quickQuery('count')">üî¢ Count Users</button>
            <button class="btn-secondary" onclick="SQLDatabase.quickQuery('sites')">üåê Users by Site</button>
          </div>
        </div>
        
        <div class="sql-section">
          <h3>üìù SQL Query</h3>
          <textarea id="sql-query-input" class="sql-query-input" placeholder="SELECT * FROM users LIMIT 10;"></textarea>
          <div class="sql-actions">
            <button class="btn-primary" onclick="SQLDatabase.runQuery()">‚ñ∂Ô∏è Run Query</button>
            <button class="btn-secondary" onclick="document.getElementById('sql-query-input').value=''">üóëÔ∏è Clear</button>
            <span class="sql-query-time" id="sql-query-time"></span>
          </div>
          
          <div class="sql-results">
            <div class="sql-results-header">
              <strong>üìä Results</strong>
              <span id="sql-results-count"></span>
            </div>
            <div class="sql-results-container" id="sql-results-container">
              <div style="color: rgba(255,255,255,0.5); text-align: center;">Run a query to see results</div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Users Section -->
      <section id="users" class="admin-section">
        <div class="admin-header">
          <div>
            <h2>üë• Users</h2>
            <p>Manage user accounts and permissions</p>
          </div>
          <span id="users-count">0 users</span>
        </div>
        
        <div class="users-table" id="users-table">
          <!-- Populated by JavaScript -->
        </div>
      </section>
      
      <!-- Statistics Section -->
      <section id="statistics" class="admin-section">
        <div class="admin-header">
          <div>
            <h2>üìä Statistics</h2>
            <p>Application metrics and usage data</p>
          </div>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="stat-users">0</div>
            <div class="stat-label">Total Users</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-items">0</div>
            <div class="stat-label">Total Items</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-admins">0</div>
            <div class="stat-label">Admins</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-storage">0 KB</div>
            <div class="stat-label">Storage Used</div>
          </div>
        </div>
        
        <div class="settings-section">
          <h3>Data Management</h3>
          <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button class="btn-secondary" onclick="exportAllData()">üì§ Export All Data</button>
            <button class="btn-secondary" style="border-color: #ef4444; color: #ef4444;" onclick="resetAllData()">üóëÔ∏è Reset All Data</button>
          </div>
        </div>
      </section>
      
      <!-- Changelog Section -->
      <section id="changelog" class="admin-section">
        <div class="admin-header">
          <div>
            <h2>üìù Changelog</h2>
            <p>Version history and updates</p>
          </div>
        </div>
        
        <div class="changelog-list">
          <div class="changelog-version">
            <h3>v1.2.0 <span class="changelog-date">January 25, 2026</span></h3>
            <ul>
              <li><strong>Admin Page</strong> - Dedicated admin.html page with sidebar navigation</li>
              <li>Data Sources tab with 6 storage backend options</li>
              <li>SQL Database tab with query interface</li>
              <li>Better organization and readability</li>
            </ul>
          </div>
          
          <div class="changelog-version">
            <h3>v1.1.0 <span class="changelog-date">January 24, 2026</span></h3>
            <ul>
              <li><strong>Cross-Site Auth</strong> - Login works across all AIUNITES sites</li>
              <li>GitHub database sync for user data</li>
              <li>SQL.js integration for browser SQLite</li>
            </ul>
          </div>
          
          <div class="changelog-version">
            <h3>v1.0.0 <span class="changelog-date">January 2026</span></h3>
            <ul>
              <li>Initial DemoTemplate release</li>
              <li>User authentication system</li>
              <li>Admin panel with modal</li>
              <li>Settings, backup, and cache viewer</li>
            </ul>
          </div>
        </div>
      </section>
      
    </main>
  </div>
  
  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>
  
  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.3/sql-wasm.js"></script>
  <script src="js/config.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/sql-database.js"></script>
  <script src="js/auth.js"></script>
  
  <script>
    // Check admin access
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is logged in and is admin
      const currentUser = Auth.getCurrentUser();
      if (!currentUser) {
        window.location.href = 'index.html';
        return;
      }
      if (!currentUser.isAdmin) {
        alert('Access denied. Admin privileges required.');
        window.location.href = 'index.html';
        return;
      }
      
      // Initialize page
      initAdminPage();
    });
    
    function initAdminPage() {
      // Setup navigation
      document.querySelectorAll('.admin-nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const section = this.dataset.section;
          showSection(section);
          
          // Update active nav
          document.querySelectorAll('.admin-nav-link').forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          
          // Close mobile sidebar
          document.getElementById('admin-sidebar').classList.remove('open');
        });
      });
      
      // Check URL hash
      const hash = window.location.hash.slice(1);
      if (hash) {
        showSection(hash);
        document.querySelector(`[data-section="${hash}"]`)?.classList.add('active');
      }
      
      // Load data
      loadSystemSettings();
      loadUsers();
      loadStatistics();
      
      // Initialize SQL Database
      if (typeof SQLDatabase !== 'undefined') {
        SQLDatabase.init();
      }
    }
    
    function showSection(sectionId) {
      document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
      document.getElementById(sectionId)?.classList.add('active');
      window.location.hash = sectionId;
    }
    
    function toggleSidebar() {
      document.getElementById('admin-sidebar').classList.toggle('open');
    }
    
    // System Settings
    function loadSystemSettings() {
      const settings = Storage.getSystemSettings ? Storage.getSystemSettings() : {};
      document.getElementById('setting-email-verification').checked = settings.requireEmailVerification || false;
      document.getElementById('setting-public-signup').checked = settings.allowPublicSignup !== false;
      document.getElementById('setting-max-items').value = settings.maxItemsPerUser || 100;
      document.getElementById('setting-maintenance').checked = settings.maintenanceMode || false;
    }
    
    function saveSystemSettings() {
      const settings = {
        requireEmailVerification: document.getElementById('setting-email-verification').checked,
        allowPublicSignup: document.getElementById('setting-public-signup').checked,
        maxItemsPerUser: parseInt(document.getElementById('setting-max-items').value) || 100,
        maintenanceMode: document.getElementById('setting-maintenance').checked
      };
      
      if (Storage.updateSystemSettings) {
        Storage.updateSystemSettings(settings);
      }
      showToast('Settings saved!', 'success');
    }
    
    // Data Sources
    function configureDataSource(source) {
      showToast(`Configure ${source} - Coming soon!`, 'info');
    }
    
    // Users
    function loadUsers() {
      const users = Storage.getAllUsersArray ? Storage.getAllUsersArray() : [];
      const container = document.getElementById('users-table');
      const countEl = document.getElementById('users-count');
      
      countEl.textContent = `${users.length} user${users.length !== 1 ? 's' : ''}`;
      
      container.innerHTML = users.map(user => {
        const isProtected = ['admin', 'demo'].includes(user.username);
        return `
          <div class="user-row">
            <div class="user-row-info">
              <div class="user-row-avatar">${user.displayName?.charAt(0).toUpperCase() || 'U'}</div>
              <div>
                <div class="user-row-name">
                  ${escapeHtml(user.displayName || user.username)}
                  ${user.isAdmin ? '<span style="background: var(--primary-color); padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; margin-left: 8px;">ADMIN</span>' : ''}
                </div>
                <div class="user-row-meta">@${user.username} ‚Ä¢ ${user.email || 'No email'}</div>
              </div>
            </div>
            <div class="user-row-actions">
              ${!isProtected ? `
                <button class="user-action-btn" onclick="toggleAdmin('${user.username}')">${user.isAdmin ? 'üë§ Remove Admin' : 'üõ°Ô∏è Make Admin'}</button>
                <button class="user-action-btn danger" onclick="deleteUser('${user.username}')">üóëÔ∏è</button>
              ` : ''}
            </div>
          </div>
        `;
      }).join('') || '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 20px;">No users found</p>';
    }
    
    function toggleAdmin(username) {
      if (Storage.toggleUserAdmin) {
        Storage.toggleUserAdmin(username);
        loadUsers();
        showToast('User updated', 'success');
      }
    }
    
    function deleteUser(username) {
      if (confirm(`Delete user "${username}"? This cannot be undone.`)) {
        if (Storage.deleteUser) {
          Storage.deleteUser(username);
          loadUsers();
          loadStatistics();
          showToast('User deleted', 'success');
        }
      }
    }
    
    // Statistics
    function loadStatistics() {
      const users = Storage.getAllUsersArray ? Storage.getAllUsersArray() : [];
      const items = Storage.getAllItems ? Object.keys(Storage.getAllItems()).length : 0;
      const admins = users.filter(u => u.isAdmin).length;
      
      document.getElementById('stat-users').textContent = users.length;
      document.getElementById('stat-items').textContent = items;
      document.getElementById('stat-admins').textContent = admins;
      
      // Calculate storage
      let totalSize = 0;
      for (let key in localStorage) {
        if (localStorage.hasOwnProperty(key)) {
          totalSize += localStorage[key].length * 2; // UTF-16
        }
      }
      document.getElementById('stat-storage').textContent = (totalSize / 1024).toFixed(1) + ' KB';
    }
    
    function exportAllData() {
      const data = Storage.exportData ? Storage.exportData() : {};
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `demotemplate-backup-${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      URL.revokeObjectURL(url);
      showToast('Data exported!', 'success');
    }
    
    function resetAllData() {
      if (confirm('‚ö†Ô∏è This will delete ALL data. Are you sure?')) {
        if (confirm('This cannot be undone. Type OK to confirm.')) {
          if (Storage.clearAll) {
            Storage.clearAll();
          }
          localStorage.clear();
          window.location.href = 'index.html';
        }
      }
    }
    
    // Utilities
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    function showToast(message, type = 'success') {
      const container = document.getElementById('toast-container');
      if (!container) return;
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <span class="toast-icon">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
        <span class="toast-message">${escapeHtml(message)}</span>
      `;
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideIn 0.3s ease reverse';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
  </script>
</body>
</html>
