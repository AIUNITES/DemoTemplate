<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - DemoTemplate</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öôÔ∏è</text></svg>">
  <style>
    :root {
      --primary-color: #10b981;
      --primary-dark: #059669;
      --bg-dark: #0a0a0f;
      --bg-card: #12121a;
      --text-primary: #f0f0f0;
      --text-secondary: rgba(255,255,255,0.6);
      --border-color: rgba(255,255,255,0.1);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Syne', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
    }
    
    /* Settings Page Layout */
    .settings-layout {
      display: flex;
      min-height: 100vh;
    }
    
    /* Sidebar */
    .settings-sidebar {
      width: 260px;
      background: linear-gradient(180deg, #0f0f1a 0%, #1a1a2e 100%);
      border-right: 1px solid var(--border-color);
      padding: 20px 0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
      transition: transform 0.3s ease;
    }
    
    .settings-sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 20px;
    }
    
    .settings-sidebar-header h1 {
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0;
    }
    
    .settings-sidebar-header p {
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin: 5px 0 0;
    }
    
    .settings-nav {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .settings-nav-item {
      margin: 2px 10px;
    }
    
    .settings-nav-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 15px;
      color: rgba(255,255,255,0.7);
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.2s;
      font-size: 0.9rem;
      cursor: pointer;
    }
    
    .settings-nav-link:hover {
      background: rgba(255,255,255,0.05);
      color: #fff;
    }
    
    .settings-nav-link.active {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: #fff;
    }
    
    .settings-nav-link .nav-icon {
      font-size: 1.1rem;
      width: 24px;
      text-align: center;
    }
    
    .settings-sidebar-footer {
      padding: 20px;
      border-top: 1px solid var(--border-color);
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: inherit;
    }
    
    .settings-sidebar-footer a {
      display: flex;
      align-items: center;
      gap: 10px;
      color: rgba(255,255,255,0.6);
      text-decoration: none;
      font-size: 0.85rem;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.2s;
    }
    
    .settings-sidebar-footer a:hover {
      background: rgba(255,255,255,0.05);
      color: #fff;
    }
    
    /* Main Content */
    .settings-main {
      flex: 1;
      margin-left: 260px;
      padding: 30px;
      max-width: 800px;
    }
    
    .settings-header {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .settings-header h2 {
      font-size: 1.75rem;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .settings-header p {
      color: var(--text-secondary);
      margin: 5px 0 0;
    }
    
    /* Content Sections */
    .settings-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    .settings-section.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Form Styles */
    .settings-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }
    
    .settings-card h3 {
      font-size: 1.1rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group:last-child {
      margin-bottom: 0;
    }
    
    .form-group label {
      display: block;
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      color: var(--text-primary);
      font-family: inherit;
      font-size: 0.95rem;
      transition: all 0.2s;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
    
    .form-group input:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .form-hint {
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin-top: 6px;
    }
    
    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
    }
    
    .btn-secondary {
      background: rgba(255,255,255,0.1);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }
    
    .btn-secondary:hover {
      background: rgba(255,255,255,0.15);
    }
    
    .btn-danger {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    
    .btn-danger:hover {
      background: rgba(239, 68, 68, 0.3);
    }
    
    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    /* Avatar Section */
    .avatar-section {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .avatar-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: bold;
      color: white;
    }
    
    .avatar-info h4 {
      font-size: 1.1rem;
      margin-bottom: 4px;
    }
    
    .avatar-info p {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    /* Toggle Switch */
    .toggle-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid var(--border-color);
    }
    
    .toggle-row:last-child {
      border-bottom: none;
    }
    
    .toggle-info h4 {
      font-size: 0.95rem;
      margin-bottom: 4px;
    }
    
    .toggle-info p {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .toggle {
      position: relative;
      width: 50px;
      height: 28px;
    }
    
    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(255,255,255,0.1);
      transition: 0.3s;
      border-radius: 28px;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }
    
    .toggle input:checked + .toggle-slider {
      background-color: var(--primary-color);
    }
    
    .toggle input:checked + .toggle-slider:before {
      transform: translateX(22px);
    }
    
    /* Theme Options */
    .theme-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    
    .theme-option {
      padding: 15px;
      background: rgba(0,0,0,0.2);
      border: 2px solid var(--border-color);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    
    .theme-option:hover {
      border-color: rgba(255,255,255,0.3);
    }
    
    .theme-option.active {
      border-color: var(--primary-color);
      background: rgba(16, 185, 129, 0.1);
    }
    
    .theme-option .theme-preview {
      width: 100%;
      height: 60px;
      border-radius: 6px;
      margin-bottom: 10px;
    }
    
    .theme-option.dark .theme-preview {
      background: linear-gradient(135deg, #0a0a0f, #1a1a2e);
    }
    
    .theme-option.light .theme-preview {
      background: linear-gradient(135deg, #f0f0f0, #ffffff);
    }
    
    .theme-option.system .theme-preview {
      background: linear-gradient(135deg, #0a0a0f 50%, #f0f0f0 50%);
    }
    
    .theme-option span {
      font-size: 0.85rem;
    }
    
    /* Backup Section */
    .backup-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .backup-card {
      background: rgba(0,0,0,0.2);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    
    .backup-card .icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }
    
    .backup-card h4 {
      margin-bottom: 8px;
    }
    
    .backup-card p {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-bottom: 15px;
    }
    
    /* Cache Section */
    .cache-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .cache-stat {
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    
    .cache-stat .value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary-color);
    }
    
    .cache-stat .label {
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 5px;
    }
    
    .cache-items {
      max-height: 300px;
      overflow-y: auto;
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
      padding: 15px;
    }
    
    .cache-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid var(--border-color);
      font-size: 0.85rem;
    }
    
    .cache-item:last-child {
      border-bottom: none;
    }
    
    .cache-item-key {
      font-family: 'Space Mono', monospace;
      color: var(--primary-color);
    }
    
    .cache-item-size {
      color: var(--text-secondary);
    }
    
    /* Legal Links */
    .legal-links {
      display: grid;
      gap: 15px;
    }
    
    .legal-link {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: rgba(0,0,0,0.2);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      text-decoration: none;
      color: var(--text-primary);
      transition: all 0.2s;
    }
    
    .legal-link:hover {
      background: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.2);
    }
    
    .legal-link-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .legal-link-icon {
      font-size: 1.5rem;
    }
    
    .legal-link h4 {
      margin-bottom: 4px;
    }
    
    .legal-link p {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .legal-link-arrow {
      font-size: 1.2rem;
      color: var(--text-secondary);
    }
    
    /* Mobile Menu Button */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 200;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 10px 15px;
      color: var(--text-primary);
      cursor: pointer;
      font-size: 1.2rem;
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
      }
      
      .settings-sidebar {
        transform: translateX(-100%);
      }
      
      .settings-sidebar.open {
        transform: translateX(0);
      }
      
      .settings-main {
        margin-left: 0;
        padding: 70px 15px 30px;
      }
      
      .backup-actions {
        grid-template-columns: 1fr;
      }
      
      .cache-stats {
        grid-template-columns: 1fr;
      }
      
      .theme-options {
        grid-template-columns: 1fr;
      }
    }
    
    /* Toast */
    .toast-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 10000;
    }
    
    .toast {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      margin-top: 10px;
      animation: slideIn 0.3s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    
    .toast.success { border-left: 3px solid #10b981; }
    .toast.error { border-left: 3px solid #ef4444; }
    .toast.info { border-left: 3px solid #6366f1; }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
  
  <div class="settings-layout">
    <!-- Sidebar -->
    <aside class="settings-sidebar" id="settings-sidebar">
      <div class="settings-sidebar-header">
        <h1>‚öôÔ∏è Settings</h1>
        <p>DemoTemplate v1.2.0</p>
      </div>
      
      <ul class="settings-nav">
        <li class="settings-nav-item">
          <a class="settings-nav-link active" data-section="profile">
            <span class="nav-icon">üë§</span>
            <span>Profile</span>
          </a>
        </li>
        <li class="settings-nav-item">
          <a class="settings-nav-link" data-section="security">
            <span class="nav-icon">üîí</span>
            <span>Security</span>
          </a>
        </li>
        <li class="settings-nav-item">
          <a class="settings-nav-link" data-section="appearance">
            <span class="nav-icon">üé®</span>
            <span>Appearance</span>
          </a>
        </li>
        <li class="settings-nav-item">
          <a class="settings-nav-link" data-section="notifications">
            <span class="nav-icon">üîî</span>
            <span>Notifications</span>
          </a>
        </li>
        <li class="settings-nav-item">
          <a class="settings-nav-link" data-section="backup">
            <span class="nav-icon">üíæ</span>
            <span>Backup & Data</span>
          </a>
        </li>
        <li class="settings-nav-item">
          <a class="settings-nav-link" data-section="cache">
            <span class="nav-icon">üì¶</span>
            <span>Cache</span>
          </a>
        </li>
        <li class="settings-nav-item">
          <a class="settings-nav-link" data-section="legal">
            <span class="nav-icon">üìú</span>
            <span>Legal</span>
          </a>
        </li>
      </ul>
      
      <div class="settings-sidebar-footer">
        <a href="index.html">
          <span>‚Üê</span>
          <span>Back to App</span>
        </a>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="settings-main">
      
      <!-- Profile Section -->
      <section id="profile" class="settings-section active">
        <div class="settings-header">
          <h2>üë§ Profile</h2>
          <p>Manage your personal information</p>
        </div>
        
        <div class="settings-card">
          <div class="avatar-section">
            <div class="avatar-preview" id="avatar-preview">A</div>
            <div class="avatar-info">
              <h4 id="profile-display-name">Administrator</h4>
              <p id="profile-username">@admin</p>
            </div>
          </div>
          
          <div class="form-group">
            <label for="display-name">Display Name</label>
            <input type="text" id="display-name" placeholder="Your display name">
          </div>
          
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" placeholder="your@email.com">
            <p class="form-hint">Used for notifications and account recovery</p>
          </div>
          
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" disabled>
            <p class="form-hint">Username cannot be changed</p>
          </div>
          
          <div class="btn-group">
            <button class="btn btn-primary" onclick="saveProfile()">üíæ Save Changes</button>
          </div>
        </div>
      </section>
      
      <!-- Security Section -->
      <section id="security" class="settings-section">
        <div class="settings-header">
          <h2>üîí Security</h2>
          <p>Manage your password and security settings</p>
        </div>
        
        <div class="settings-card">
          <h3>üîë Change Password</h3>
          
          <div class="form-group">
            <label for="current-password">Current Password</label>
            <input type="password" id="current-password" placeholder="Enter current password">
          </div>
          
          <div class="form-group">
            <label for="new-password">New Password</label>
            <input type="password" id="new-password" placeholder="Enter new password">
            <p class="form-hint">At least 6 characters</p>
          </div>
          
          <div class="form-group">
            <label for="confirm-password">Confirm New Password</label>
            <input type="password" id="confirm-password" placeholder="Confirm new password">
          </div>
          
          <div class="btn-group">
            <button class="btn btn-primary" onclick="changePassword()">üîê Update Password</button>
          </div>
        </div>
        
        <div class="settings-card">
          <h3>üõ°Ô∏è Account Security</h3>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Two-Factor Authentication</h4>
              <p>Add an extra layer of security</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggle-2fa" disabled>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <p class="form-hint" style="margin-top: 10px;">Coming soon</p>
        </div>
      </section>
      
      <!-- Appearance Section -->
      <section id="appearance" class="settings-section">
        <div class="settings-header">
          <h2>üé® Appearance</h2>
          <p>Customize how the app looks</p>
        </div>
        
        <div class="settings-card">
          <h3>üåô Theme</h3>
          
          <div class="theme-options">
            <div class="theme-option dark active" data-theme="dark" onclick="setTheme('dark')">
              <div class="theme-preview"></div>
              <span>Dark</span>
            </div>
            <div class="theme-option light" data-theme="light" onclick="setTheme('light')">
              <div class="theme-preview"></div>
              <span>Light</span>
            </div>
            <div class="theme-option system" data-theme="system" onclick="setTheme('system')">
              <div class="theme-preview"></div>
              <span>System</span>
            </div>
          </div>
        </div>
        
        <div class="settings-card">
          <h3>‚ú® Display Options</h3>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Animations</h4>
              <p>Enable smooth transitions and effects</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggle-animations" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Compact Mode</h4>
              <p>Reduce spacing for more content</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggle-compact">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </section>
      
      <!-- Notifications Section -->
      <section id="notifications" class="settings-section">
        <div class="settings-header">
          <h2>üîî Notifications</h2>
          <p>Control how you receive updates</p>
        </div>
        
        <div class="settings-card">
          <h3>üì¨ Notification Preferences</h3>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Email Notifications</h4>
              <p>Receive updates via email</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggle-email-notif">
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Browser Notifications</h4>
              <p>Show desktop notifications</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggle-browser-notif">
              <span class="toggle-slider"></span>
            </label>
          </div>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Sound Effects</h4>
              <p>Play sounds for actions</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="toggle-sound" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </section>
      
      <!-- Backup Section -->
      <section id="backup" class="settings-section">
        <div class="settings-header">
          <h2>üíæ Backup & Data</h2>
          <p>Export or import your data</p>
        </div>
        
        <div class="settings-card">
          <h3>üì§ Export / Import</h3>
          
          <div class="backup-actions">
            <div class="backup-card">
              <div class="icon">üì•</div>
              <h4>Download Backup</h4>
              <p>Export all your data as a JSON file</p>
              <button class="btn btn-secondary" onclick="downloadBackup()">Download</button>
            </div>
            
            <div class="backup-card">
              <div class="icon">üì§</div>
              <h4>Restore Backup</h4>
              <p>Import data from a backup file</p>
              <label class="btn btn-secondary" style="cursor: pointer;">
                Upload
                <input type="file" id="restore-file" accept=".json" style="display: none;" onchange="restoreBackup(event)">
              </label>
            </div>
          </div>
        </div>
        
        <div class="settings-card">
          <h3>‚ö†Ô∏è Danger Zone</h3>
          
          <div class="toggle-row">
            <div class="toggle-info">
              <h4>Delete All Data</h4>
              <p>Permanently delete all your data from this device</p>
            </div>
            <button class="btn btn-danger" onclick="deleteAllData()">Delete</button>
          </div>
        </div>
      </section>
      
      <!-- Cache Section -->
      <section id="cache" class="settings-section">
        <div class="settings-header">
          <h2>üì¶ Cache</h2>
          <p>View and manage cached data</p>
        </div>
        
        <div class="settings-card">
          <h3>üìä Storage Usage</h3>
          
          <div class="cache-stats">
            <div class="cache-stat">
              <div class="value" id="cache-total-keys">0</div>
              <div class="label">Keys</div>
            </div>
            <div class="cache-stat">
              <div class="value" id="cache-total-size">0 KB</div>
              <div class="label">Total Size</div>
            </div>
            <div class="cache-stat">
              <div class="value" id="cache-app-keys">0</div>
              <div class="label">App Keys</div>
            </div>
          </div>
        </div>
        
        <div class="settings-card">
          <h3>üóÇÔ∏è Cached Items</h3>
          
          <div class="cache-items" id="cache-items-list">
            <!-- Populated by JS -->
          </div>
          
          <div class="btn-group">
            <button class="btn btn-secondary" onclick="refreshCache()">üîÑ Refresh</button>
            <button class="btn btn-danger" onclick="clearCache()">üóëÔ∏è Clear Cache</button>
          </div>
        </div>
      </section>
      
      <!-- Legal Section -->
      <section id="legal" class="settings-section">
        <div class="settings-header">
          <h2>üìú Legal</h2>
          <p>Terms, privacy, and legal information</p>
        </div>
        
        <div class="settings-card">
          <div class="legal-links">
            <a href="#" class="legal-link" onclick="showLegalDoc('terms')">
              <div class="legal-link-info">
                <span class="legal-link-icon">üìã</span>
                <div>
                  <h4>Terms of Service</h4>
                  <p>Rules and guidelines for using our service</p>
                </div>
              </div>
              <span class="legal-link-arrow">‚Üí</span>
            </a>
            
            <a href="#" class="legal-link" onclick="showLegalDoc('privacy')">
              <div class="legal-link-info">
                <span class="legal-link-icon">üîê</span>
                <div>
                  <h4>Privacy Policy</h4>
                  <p>How we collect and use your data</p>
                </div>
              </div>
              <span class="legal-link-arrow">‚Üí</span>
            </a>
            
            <a href="#" class="legal-link" onclick="showLegalDoc('cookies')">
              <div class="legal-link-info">
                <span class="legal-link-icon">üç™</span>
                <div>
                  <h4>Cookie Policy</h4>
                  <p>Information about cookies we use</p>
                </div>
              </div>
              <span class="legal-link-arrow">‚Üí</span>
            </a>
          </div>
        </div>
        
        <div class="settings-card">
          <h3>‚ÑπÔ∏è About</h3>
          <p style="color: var(--text-secondary); line-height: 1.6;">
            DemoTemplate v1.2.0<br>
            Part of the AIUNITES network<br>
            ¬© 2026 AIUNITES. All rights reserved.
          </p>
        </div>
      </section>
      
    </main>
  </div>
  
  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>
  
  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/auth.js"></script>
  <script>
    // Check if user is logged in
    const currentUser = Storage.getCurrentUser();
    if (!currentUser) {
      window.location.href = 'index.html';
    }
    
    // Toast function
    function showToast(message, type = 'success') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      container.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }
    
    // Toggle sidebar on mobile
    function toggleSidebar() {
      document.getElementById('settings-sidebar').classList.toggle('open');
    }
    
    // Navigation
    document.querySelectorAll('.settings-nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const section = link.dataset.section;
        
        // Update active nav
        document.querySelectorAll('.settings-nav-link').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        // Update active section
        document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));
        document.getElementById(section).classList.add('active');
        
        // Close mobile sidebar
        document.getElementById('settings-sidebar').classList.remove('open');
        
        // Update URL hash
        window.location.hash = section;
      });
    });
    
    // Handle URL hash on load
    window.addEventListener('load', () => {
      const hash = window.location.hash.slice(1);
      if (hash) {
        const link = document.querySelector(`.settings-nav-link[data-section="${hash}"]`);
        if (link) link.click();
      }
      
      // Load user data
      loadUserData();
      refreshCache();
    });
    
    // Load user data into form
    function loadUserData() {
      if (!currentUser) return;
      
      // Avatar
      const initial = (currentUser.displayName || currentUser.username || 'U')[0].toUpperCase();
      document.getElementById('avatar-preview').textContent = initial;
      document.getElementById('profile-display-name').textContent = currentUser.displayName || currentUser.username;
      document.getElementById('profile-username').textContent = '@' + currentUser.username;
      
      // Form fields
      document.getElementById('display-name').value = currentUser.displayName || '';
      document.getElementById('email').value = currentUser.email || '';
      document.getElementById('username').value = currentUser.username || '';
    }
    
    // Save profile
    function saveProfile() {
      const displayName = document.getElementById('display-name').value.trim();
      const email = document.getElementById('email').value.trim();
      
      if (!displayName) {
        showToast('Display name is required', 'error');
        return;
      }
      
      // Update user
      const users = Storage.getAllUsers();
      const userIndex = users.findIndex(u => u.username === currentUser.username);
      if (userIndex !== -1) {
        users[userIndex].displayName = displayName;
        users[userIndex].email = email;
        localStorage.setItem(CONFIG.STORAGE_KEYS.USERS, JSON.stringify(users));
        
        // Update current user reference
        currentUser.displayName = displayName;
        currentUser.email = email;
        
        // Update UI
        loadUserData();
        showToast('Profile saved!', 'success');
      }
    }
    
    // Change password
    function changePassword() {
      const current = document.getElementById('current-password').value;
      const newPass = document.getElementById('new-password').value;
      const confirm = document.getElementById('confirm-password').value;
      
      if (!current || !newPass || !confirm) {
        showToast('Please fill all password fields', 'error');
        return;
      }
      
      if (newPass !== confirm) {
        showToast('New passwords do not match', 'error');
        return;
      }
      
      if (newPass.length < 6) {
        showToast('Password must be at least 6 characters', 'error');
        return;
      }
      
      // Verify current password
      const users = Storage.getAllUsers();
      const user = users.find(u => u.username === currentUser.username);
      if (!user || user.password !== current) {
        showToast('Current password is incorrect', 'error');
        return;
      }
      
      // Update password
      user.password = newPass;
      localStorage.setItem(CONFIG.STORAGE_KEYS.USERS, JSON.stringify(users));
      
      // Clear form
      document.getElementById('current-password').value = '';
      document.getElementById('new-password').value = '';
      document.getElementById('confirm-password').value = '';
      
      showToast('Password updated!', 'success');
    }
    
    // Theme
    function setTheme(theme) {
      document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
      document.querySelector(`.theme-option[data-theme="${theme}"]`).classList.add('active');
      localStorage.setItem('demotemplate_theme', theme);
      showToast(`Theme set to ${theme}`, 'success');
    }
    
    // Backup
    function downloadBackup() {
      const data = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('demotemplate_') || key.startsWith('demo_')) {
          data[key] = localStorage.getItem(key);
        }
      }
      
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `demotemplate_backup_${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      URL.revokeObjectURL(url);
      
      showToast('Backup downloaded!', 'success');
    }
    
    function restoreBackup(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);
          let count = 0;
          for (const [key, value] of Object.entries(data)) {
            localStorage.setItem(key, value);
            count++;
          }
          showToast(`Restored ${count} items!`, 'success');
          setTimeout(() => location.reload(), 1000);
        } catch (err) {
          showToast('Invalid backup file', 'error');
        }
      };
      reader.readAsText(file);
    }
    
    function deleteAllData() {
      if (!confirm('Are you sure? This will delete ALL your data and cannot be undone!')) return;
      if (!confirm('Really sure? Last chance!')) return;
      
      const keysToDelete = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('demotemplate_') || key.startsWith('demo_')) {
          keysToDelete.push(key);
        }
      }
      
      keysToDelete.forEach(key => localStorage.removeItem(key));
      showToast('All data deleted!', 'success');
      setTimeout(() => window.location.href = 'index.html', 1000);
    }
    
    // Cache
    function refreshCache() {
      let totalKeys = 0;
      let totalSize = 0;
      let appKeys = 0;
      const items = [];
      
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        const value = localStorage.getItem(key);
        const size = new Blob([value]).size;
        
        totalKeys++;
        totalSize += size;
        
        if (key.startsWith('demotemplate_') || key.startsWith('demo_')) {
          appKeys++;
          items.push({ key, size });
        }
      }
      
      document.getElementById('cache-total-keys').textContent = totalKeys;
      document.getElementById('cache-total-size').textContent = formatBytes(totalSize);
      document.getElementById('cache-app-keys').textContent = appKeys;
      
      const list = document.getElementById('cache-items-list');
      if (items.length === 0) {
        list.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 20px;">No cached items</p>';
      } else {
        list.innerHTML = items.map(item => `
          <div class="cache-item">
            <span class="cache-item-key">${item.key}</span>
            <span class="cache-item-size">${formatBytes(item.size)}</span>
          </div>
        `).join('');
      }
    }
    
    function formatBytes(bytes) {
      if (bytes === 0) return '0 B';
      const k = 1024;
      const sizes = ['B', 'KB', 'MB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
    }
    
    function clearCache() {
      if (!confirm('Clear all app cache? This will log you out.')) return;
      
      const keysToDelete = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('demotemplate_') || key.startsWith('demo_')) {
          keysToDelete.push(key);
        }
      }
      
      keysToDelete.forEach(key => localStorage.removeItem(key));
      showToast('Cache cleared!', 'success');
      setTimeout(() => window.location.href = 'index.html', 1000);
    }
    
    // Legal docs
    function showLegalDoc(type) {
      const titles = {
        terms: 'Terms of Service',
        privacy: 'Privacy Policy',
        cookies: 'Cookie Policy'
      };
      alert(`${titles[type]}\n\nThis is a demo application. No actual terms apply.`);
    }
  </script>
</body>
</html>
